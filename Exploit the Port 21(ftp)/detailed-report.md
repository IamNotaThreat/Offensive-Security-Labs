# FTP & Web App Exploit: Detailed Report

This document provides a step-by-step walkthrough of the lab exercise.

### **Phase 1: Reconnaissance**
My initial step was to perform a detailed `nmap` scan on the target at `192.168.57.7`. The scan revealed three key open ports: 21 (FTP), 22 (SSH), and 80 (HTTP). I noted the FTP service version was **vsftpd 3.0.3** and that **Anonymous FTP login was allowed**.

! [Nmap Scan Results](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/1.png)

### **Phase 2: FTP Enumeration & Information Gathering**
Given the open anonymous access, I connected to the FTP service using the username "Anonymous" and a blank password. Inside, I found and downloaded a file named `note.txt`.

! [Anonymous FTP Login](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/4.png)
! [Anonymous FTP Login](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/5.png)

This note was a critical piece of information. It mentioned a test website for an "academy" and contained an SQL command that included a student ID (`10201321`) and an MD5 password hash.

! [Contents of note.txt](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/7.png)

### **Phase 3: Web Application Enumeration**
Based on the note, I browsed to the web server on port 80. I was met with a default Apache page, so I launched `DirBuster` to find hidden directories. The scan discovered an `/academy/` directory.

! [DirBuster Scan finding academy directory](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/10.png)

Navigating to `http://192.168.57.7/academy` brought me to a student login portal.

! [Academy Login Page](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/11.png)

### **Phase 4: Gaining Access to the Web App**
To log in, I needed the password for the student ID.

1.  **Hash Identification**: I confirmed the hash from `note.txt` was MD5.
2.  **Password Cracking**: I used `HashCat` with a common wordlist to crack the discovered MD5 hash.
3.  **Credentials Found**: The password was successfully cracked as **"student"**.

! [HashCat Cracking the Password](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/13.png)

I then used the student ID and the cracked password to log in to the student portal successfully.

### **Phase 5: Remote Code Execution via File Upload**
Inside the student profile page, I discovered an "Upload New Photo" feature. I tested this by uploading a simple `.txt` file, and it was accepted without any validation. This indicated a critical **unrestricted file upload vulnerability**.

! [Successful File Upload](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/15.png)

1.  **Prepare the Payload**: I utilized a standard PHP reverse shell script, which I edited to include my attacker IP address and a listening port (`1234`).
2.  **Set Up Listener**: On my machine, I started a `netcat` listener on port 1234 to catch the incoming connection.
3.  **Exploitation**: I uploaded the malicious `shell.php` file through the web application's photo upload form. Once the file was on the server, I triggered it, and a reverse shell connected back to my listener.

! [Successful Reverse Shell Connection](https://github.com/IamNotaThreat/Offensive-Security-Labs/blob/main/Exploit%20the%20Port%2021(ftp)/images/19.png)

This provided me with a shell on the target machine as the `www-data` user, successfully compromising the server.
